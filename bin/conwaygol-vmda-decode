#!/bin/sh

LANG=C

pname="$(basename "$0")"
stime="$(date +%Y%m%d%H%M%S)"
tmp="/tmp/$pname.$stime.$$"

trap 'rm -f $tmp-*' EXIT

######################################################################

cell_vmda=${1:-"-"}

######################################################################

cat "${cell_vmda}"		|
    ## convert vMDA into cell pattern
    awk -v ccol=1 -v cline=1	'
	{	X = $2; Y = $3;
		for(; $5 > cline; cline++)	{
			for(; X >= ccol; ccol++)	printf("0");
			printf("\n");  
			ccol = 1;
		}
		for(; $4 > ccol; ccol++)	printf("0");

		printf("%d", $6); ccol++;	}
	END{	for(; Y >= cline; cline++)	{
			for(; X >= ccol; ccol++)	printf("0");
			printf("\n");
			ccol = 1;
		}
	}'			|
    tr '0123456789'	\
       '_________X'


######################################################################
exit 0
